
<app-header (toggleSideBarForMe)="sideBarToggler()"></app-header>
<mat-drawer-container > 
   <mat-drawer mode="side" [opened]="sideBarOpen" >
    <app-patientdetailsdashboard></app-patientdetailsdashboard>
   </mat-drawer>
   <mat-drawer-content>
     <!-- <router-outlet></router-outlet> -->
     
<div class="container">
    <div class="row">
        <div class="col">
            <div class="card col-12 col-md-12 mt-5">
                
                <div class="text-center">
                    <h2>Allergy Information</h2>
                </div>
                
<form [formGroup]="allergyForm" (ngSubmit)="onSubmit()">

    <div class=" row form-group mb-3">
        <label class="col-sm-3 control-label">Patient has any known allergies?</label>
        <div class="col-sm-9">
            <label class="radio-inline col-sm-2"> <input  [(ngModel)]="type" class="form-check-input" formControlName="hasAllergy"  type="radio" name="hasAllergy" id="hasallergyYes" [value]="true"> Yes </label>
            <label class="radio-inline col-sm-3"> <input  [(ngModel)]="type" class="form-check-input" formControlName="hasAllergy" type="radio" name="hasAllergy" id="hasallergyNo" [value]="false"> No </label>
          </div>
    </div>

    
    <div *ngIf="type == 1">
        <div class="row">
            <div class="col">
        <div class="mb-3">
            <label for="allergyId">Allergy Id </label>
            <div class="mb-3">
                <input class="form-control" list="allergyid" formControlName="allergyId" [(ngModel)]="allergyIdDdl" (change)="showOtherFieldsOnAllergyId()" [value]="showAllergyId" placeholder="Enter WHO/IUIS Allergen Nomenclature ID, if known">
                    <datalist id="allergyid">
                    <option *ngFor="let allergy of allergies">
                            {{allergy.allergyId}}
                    </datalist>       
            </div>
        </div>
        </div>

       
                <div class="col">
        <div class="mb-3">
            <label for="allergytype">Allergy Type </label>
            <div class="mb-3">
                <input class="form-control" list="allergytype" formControlName="allergyType" [value]="showAllergyType">
                    <datalist id="allergytype">
                    <option *ngFor="let allergy of allergies">
                        {{allergy.allergytype}}
                    </datalist>
            </div>
        </div>  
        </div>
      
        <div class="col">
        <div class="form-group mb-3">
            <label for="allergyname">Allergy Name </label>
            <div class="mb-3">                
                <input class="form-control" [(ngModel)]="allergynameddl" [value]="showAllergyName" list="allergyname" formControlName="allergyName" (change)="showClinicalInfoandAllergyIdOnAllergyName()">
                    <datalist id="allergyname">                      
                    <option *ngFor="let allergy of allergies">
                        {{allergy.allergyname}}
                    </datalist>
            </div>
            <input type="text" class="form-control" formControlName="allergyName" *ngIf="allergynameddl=='Other'" [(ngModel)]="allergynameddl">           
            <span class="text-danger" *ngIf="allergyForm.controls['allergyName'].touched && allergyForm.hasError('required','allergyName')">This field cannot be empty.</span>
        </div>  
        </div> 
        </div>    
       
        <div class="form-group mb-3">
            <label for="allergydescription" class="form-label">Allergy Description </label>
            <textarea id="allergydescription" rows="3" class="form-control" type="text" formControlName="allergyDescription"></textarea>
            <span class="text-danger" *ngIf="allergyForm.controls['allergyDescription'].touched && allergyForm.hasError('required','allergyDescription')">This field cannot be empty.</span>
            <span class="text-danger" *ngIf="allergyForm.controls['allergyDescription'].dirty && allergyForm.hasError('minlength','allergyDescription')">Description should be more than 10 letters.</span>
            <span class="text-danger" *ngIf="allergyForm.controls['allergyDescription'].dirty && allergyForm.hasError('maxlength','allergyDescription')">Description should be more than 1000 letters.</span>
        </div>
    
        <div class="row">
            <div class="col">
        <div class="form-group mb-3">
            <label for="allergyclinicalinfo">Allergy Clinical Information </label>
            <input id="allergyclinicalinfo" type="text" formControlName="clinicalInfo" class="form-control mb-3" [value]="showClinicalInfo">            
        </div>
    </div>
        </div>

        <!-- <div class="row"> -->
        <div class="row form-group mb-3">
            <label class="col-sm-2 control-label" for="isFatal">Is Allergy Fatal?</label>
            <div class="col-sm-10">
                <label class="radio-inline col-sm-2"> <input class="form-check-input" formControlName="isFatal"  type="radio" name="isFatal" id="isfatalYes" value="Yes"> Yes </label>
                <label class="radio-inline col-sm-4"> <input class="form-check-input" formControlName="isFatal" type="radio" name="isFatal" id="isfatalNo" value="No"> No </label>
              </div>             
            <span class="text-danger" *ngIf="allergyForm.controls['isFatal'].touched && allergyForm.hasError('required','isFatal')">Kindly provide a response.</span>
        </div>
    <!-- </div> -->
        
    
        <button type="submit"  class="btn btn-primary">Submit</button>&nbsp;
        <button type="reset"  class="btn btn-primary">Reset</button>
    </div>   
  
  </form>
                 

            </div>
        </div>
    </div>
</div>
   </mat-drawer-content>
</mat-drawer-container> 

